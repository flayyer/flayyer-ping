!function(){if("undefined"!=typeof window){var e=function(e,t){try{var n,r="flayyer.com",a=(t=t||{}).ext||".gif",o="error",i=void 0,c=e.console,u=e.navigator,p=e.location,f=p&&p.hostname,m=e.document,l=u&&u.userAgent,s=encodeURIComponent,g=decodeURIComponent;try{n=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}var v,y=!1,h="load",d="pushState",w="popstate",E=e.dispatchEvent,_=function(e){c&&c.warn&&c.warn("FlayyerPing:",e)},O=/(bot|spider|crawl)/i.test(l)&&!/(cubot)/i.test(l),b=u.webdriver||e.__nightmare||"callPhantom"in e||"_phantom"in e||"phantom"in e||O,x=function(e){var t=p.search.match(new RegExp("[?&]("+e+")=([^?&]+)","gi")),n=t?t.map((function(e){return e.split("=")[1]})):[];if(n&&n[0])return n[0]},S=function(){var t=e.crypto||e.msCrypto,n=[1e7]+-1e3+-4e3+-8e3+-1e11,r=/[018]/g;try{return n.replace(r,(function(e){return(e^t.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}catch(e){return n.replace(r,(function(e){var t=16*Math.random()|0;return(e<2?t:3&t|8).toString(16)}))}},T=function(){for(var e={},t=arguments,n=0;n<t.length;n++){var r=t[n];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B=f,I=(m.referrer||"").replace(f,B).replace(/^https?:\/\/((m|l|w{2,3}([0-9]+)?)\.)?([^?#]+)(.*)$/,"$4").replace(/^([^/]+)$/,"$1")||i,R={source:x("(utm_)?source|ref"),medium:x("(utm_)?medium"),campaign:x("(utm_)?campaign"),term:x("(utm_)?term"),content:x("(utm_)?content"),referrer:I},$={},j=S(),A={v:1,bot:b,host:B},C=function(e){e=T(A,e);var n=Object.keys(e).filter((function(t){return e[t]!==i&&null!==e[t]})).map((function(t){return s(t)+"="+s(e[t])})).join("&"),r="https://edge.flayyer.com/v2/ping"+a+"?"+n,o=t.fetch;o?o(r).catch((function(){})):(new Image).src=r},P=function(e){e=e.message||e,_(e),C({type:o,error:e,url:B+p.pathname})},U=function(){var e=[];return m.querySelectorAll('meta[property^="og:image"][content*="flayyer.com"], meta[name^="twitter:image"][content*="flayyer.com"]').forEach((function(t){var n=t.content.split(r)[1];e.indexOf(n)>-1||e.push(n)})),e},k=function(e){return e||g(p.pathname)},q=function(t){var r=t&&t.type,a=r===d||r===w?1:0,o=U();if(o.length){var i=k();if(i&&v!==i){v=i;for(var c={path:i},f=0;f<o.length;f++)c["f"+f]=o[f];u.language&&(c.language=u.language);var m=e.performance,l="navigation",s=m&&m.getEntriesByType&&m.getEntriesByType(l)[0]&&m.getEntriesByType(l)[0].type?["reload","back_forward"].indexOf(m.getEntriesByType(l)[0].type)>-1:m&&m.navigation&&[1,2].indexOf(m.navigation.type)>-1,g=I?I.split("/")[0]===B:y;c.uniq=a||s?y:!g,$=c,function(e,t,r){j=S(),$.id=j;var a=B+k(),o=T($,t?{referrer:r?I:null}:R,{ssl:"https:"===p.protocol,tz:n,type:"pageview"});C(o),I=a}(0,a||s,g)}}},F=e.history;if((F?F.pushState:i)&&Event&&E){F.pushState=(Z=F[V=d],function(){var e,t=arguments,n=Z.apply(this,t);return"function"==typeof Event?e=new Event(V):(e=m.createEvent("Event")).initEvent(V,!0,!0),e.arguments=t,E(e),n})}var L=e.addEventListener,z=e.removeEventListener,D=function(e){e.filename&&e.filename.indexOf(r)>-1&&P(e.message)},M={go:function(){L(h,q,y),L(d,q,y),L(w,q,y),L(o,D,y)},no:function(){z(h,q,y),z(d,q,y),z(w,q,y),z(o,D,y)}};return M.ping=q,M.urls=U,M}catch(e){_(e),P&&P(e)}var V,Z}(window);e&&e.go()}}();
