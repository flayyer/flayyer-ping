!function(){if("undefined"!=typeof window){var e=function(e){try{var t,n="flayyer.host",r="error",a=void 0,o=e.console,i=e.navigator,c=e.location,u=c&&c.hostname,p=e.document,f=i&&i.userAgent,s=encodeURIComponent,l=decodeURIComponent;try{t=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}var m,g=!1,v="load",y="pushState",h="popstate",d=e.dispatchEvent,w=function(e){o&&o.warn&&o.warn("FlayyerPing:",e)},E=/(bot|spider|crawl)/i.test(f)&&!/(cubot)/i.test(f),_=i.webdriver||e.__nightmare||"callPhantom"in e||"_phantom"in e||"phantom"in e||E,O=function(e){var t=c.search.match(new RegExp("[?&]("+e+")=([^?&]+)","gi")),n=t?t.map((function(e){return e.split("=")[1]})):[];if(n&&n[0])return n[0]},b=function(){var t=e.crypto||e.msCrypto,n=[1e7]+-1e3+-4e3+-8e3+-1e11,r=/[018]/g;try{return n.replace(r,(function(e){return(e^t.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}catch(e){return n.replace(r,(function(e){var t=16*Math.random()|0;return(e<2?t:3&t|8).toString(16)}))}},S=function(){for(var e={},t=arguments,n=0;n<t.length;n++){var r=t[n];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x=u,T=(p.referrer||"").replace(u,x).replace(/^https?:\/\/((m|l|w{2,3}([0-9]+)?)\.)?([^?#]+)(.*)$/,"$4").replace(/^([^/]+)$/,"$1")||a,B={source:O("(utm_)?source|ref"),medium:O("(utm_)?medium"),campaign:O("(utm_)?campaign"),term:O("(utm_)?term"),content:O("(utm_)?content"),referrer:T},I={},R=b(),$={v:1,bot:_,host:x},j=function(e,t){e=S($,e);var n=new Image;t&&(n.onerror=t,n.onload=t),n.src="https://edge.flayyer.host/v2/ping.gif?"+Object.keys(e).filter((function(t){return e[t]!==a&&null!==e[t]})).map((function(t){return s(t)+"="+s(e[t])})).join("&")},A=function(e){e=e.message||e,w(e),j({type:r,error:e,url:x+c.pathname})},C=function(){var e=[];return p.querySelectorAll('meta[property^="og:image"][content*="flayyer.host"], meta[name^="twitter:image"][content*="flayyer.host"]').forEach((function(t){var r=t.content.split(n)[1];e.indexOf(r)>-1||e.push(r)})),e},P=function(e){return e||l(c.pathname)},U=function(n){var r=n&&n.type,a=r===y||r===h?1:0,o=C();if(o.length){var u=P();if(u&&m!==u){m=u;for(var p={path:u},f=0;f<o.length;f++)p["f"+f]=o[f];i.language&&(p.language=i.language);var s=e.performance,l="navigation",v=s&&s.getEntriesByType&&s.getEntriesByType(l)[0]&&s.getEntriesByType(l)[0].type?["reload","back_forward"].indexOf(s.getEntriesByType(l)[0].type)>-1:s&&s.navigation&&[1,2].indexOf(s.navigation.type)>-1,d=T?T.split("/")[0]===x:g;p.uniq=a||v?g:!d,I=p,function(e,n,r){R=b(),I.id=R;var a=x+P(),o=S(I,n?{referrer:r?T:null}:B,{ssl:"https:"===c.protocol,tz:t,type:"pageview"});j(o),T=a}(0,a||v,d)}}},k=e.history;if((k?k.pushState:a)&&Event&&d){k.pushState=(M=k[D=y],function(){var e,t=arguments,n=M.apply(this,t);return"function"==typeof Event?e=new Event(D):(e=p.createEvent("Event")).initEvent(D,!0,!0),e.arguments=t,d(e),n})}var q=e.addEventListener,F=e.removeEventListener,L=function(e){e.filename&&e.filename.indexOf(n)>-1&&A(e.message)},z={go:function(){q(v,U,g),q(y,U,g),q(h,U,g),q(r,L,g)},no:function(){F(v,U,g),F(y,U,g),F(h,U,g),F(r,L,g)}};return z.ping=U,z.urls=C,z}catch(e){w(e),A&&A(e)}var D,M}(window);e&&e.go()}}();
