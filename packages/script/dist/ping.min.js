!function(){var e=function(e){if(e)try{var n,t="flayyer.host",r=void 0,a=e.console,o=e.navigator,i=e.location,c=i&&i.hostname,u=e.document,f=o&&o.userAgent,l=encodeURIComponent,p=decodeURIComponent;try{n=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}var m,s=function(e){a&&a.warn&&a.warn("FlayyerPing:",e)},g=/(bot|spider|crawl)/i.test(f)&&!/(cubot)/i.test(f),y=o.webdriver||e.__nightmare||"callPhantom"in e||"_phantom"in e||"phantom"in e||g,h=function(e){var n=i.search.match(new RegExp("[?&]("+e+")=([^?&]+)","gi")),t=n?n.map((function(e){return e.split("=")[1]})):[];if(t&&t[0])return t[0]},v=function(){var n=e.crypto||e.msCrypto,t=[1e7]+-1e3+-4e3+-8e3+-1e11,r=/[018]/g;try{return t.replace(r,(function(e){return(e^n.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}catch(e){return t.replace(r,(function(e){var n=16*Math.random()|0;return(e<2?n:3&n|8).toString(16)}))}},d=function(){for(var e={},n=arguments,t=0;t<n.length;t++){var r=n[t];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},w=c,O=(u.referrer||"").replace(c,w).replace(/^https?:\/\/((m|l|w{2,3}([0-9]+)?)\.)?([^?#]+)(.*)$/,"$4").replace(/^([^/]+)$/,"$1")||r,_={source:h("(utm_)?source|ref"),medium:h("(utm_)?medium"),campaign:h("(utm_)?campaign"),term:h("(utm_)?term"),content:h("(utm_)?content"),referrer:O},b={},E=v(),x={version:1,bot:y,hostname:w},T=function(e,n){e=d(x,e),console.log("will send:",e);var t=new Image;n&&(t.onerror=n,t.onload=n),t.src="https://ping.flayyer.host/v2/ping.gif?"+function(e){return Object.keys(e).filter((function(n){return e[n]!==r&&null!==e[n]})).map((function(n){return l(n)+"="+l(e[n])})).join("&")}(e)},$=function(e){e=e.message||e,s(e),T({type:"error",error:e,url:w+i.pathname})},B=function(){var e=[];return u.querySelectorAll('meta[property^="og:image"][content*="flayyer.host"], meta[name^="twitter:image"][content*="flayyer.host"]').forEach((function(n){var r=n.content.split(t)[1];e.indexOf(r)>-1||e.push(r)})),e},I=function(e){return e||p(i.pathname)},R=function(t,r){var a=B();if(a.length){var c=I(r);if(c&&m!==c){m=c;for(var u={path:c},f=0;f<a.length;f++)u["f"+f]=a[f];o.language&&(u.language=o.language);var l=e.performance,p="navigation",s=l&&l.getEntriesByType&&l.getEntriesByType(p)[0]&&l.getEntriesByType(p)[0].type?["reload","back_forward"].indexOf(l.getEntriesByType(p)[0].type)>-1:l&&l.navigation&&[1,2].indexOf(l.navigation.type)>-1,g=!!O&&O.split("/")[0]===w;u.unique=!t&&!s&&!g,b=u,function(e,t,r){E=v(),b.id=E;var a=w+I(),o=d(b,t?{referrer:r?O:null}:_,{https:"https:"===i.protocol,timezone:n,type:"pageview"});T(o),O=a}(0,t||s,g)}}},j={e:function(e){e.filename&&e.filename.indexOf(t)>-1&&$(e.message)},init:function(){if(-1===c.indexOf(".")||/^[0-9]+$/.test(c.replace(/\./g,"")))return s("Will not ping from "+c);R(0)}};return j.flayyers=B,j}catch(e){s(e),$&&$(e)}};if(window){var n=window.addEventListener,t=e(window);if(t){n("load",t.init,false),n("error",t.e,false)}}}();
